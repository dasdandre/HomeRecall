@page "/backups/{DeviceId:int}"

<MudText Typo="Typo.h4" Class="mb-4">@String.Format(L["Backups_Title"], _device?.Name ?? "Laden...")</MudText>

<!-- Action Bar (Breadcrumbs & Delete Selected) -->
<div class="d-flex justify-space-between align-center mb-4">
    <MudBreadcrumbs Items="_breadcrumbs" Class="pa-0"></MudBreadcrumbs>
    @if (_selectedItems.Any())
    {
        <MudButton Variant="Variant.Outlined"
                   Color="Color.Error"
                   StartIcon="@Icons.Material.Filled.Delete"
                   OnClick="DeleteSelectedBackups"
                   Class="ml-4">
            @L["Devices_DeleteSelected"] (@_selectedItems.Count)
        </MudButton>
    }
</div>

<!-- Main Content Area -->
@if (_device == null)
{
    <MudProgressCircular Color="Color.Default" Indeterminate="true" />
}
else
{
    <!-- Mobile View: Card List -->
    <BackupMobileList 
        Backups="@_device.Backups.ToList()"
        OnUpdateNote="UpdateNote"
        OnToggleLock="ToggleLock"
        OnDownloadBackup="DownloadBackup"
        OnDeleteBackup="DeleteBackup"
    />

    <!-- Desktop View: Table -->
    <BackupTable 
        Backups="@_device.Backups.ToList()"
        @bind-SelectedItems="_selectedItems"
        Loading="@_loading"
        OnUpdateNote="UpdateNote"
        OnToggleLock="ToggleLock"
        OnDownloadBackup="DownloadBackup"
        OnDeleteBackup="DeleteBackup"
    />
}


